
////////////////////////////////////////////////
var daymet = ee.ImageCollection('NASA/ORNL/DAYMET_V3');
var years = ee.List.sequence(1980,2016);
var months = ee.List.sequence(1,12,1);//(month, to month, by)
print(months)
var monthSpan = 1;
var reducer = ee.Reducer.mean();
var band_names = ['tmin'];

function getMonthlySum(year,monthStart,monthEnd,reducer){
  var startDate = ee.Date.fromYMD(year,1,1).advance(monthStart,'month').advance(-1,'month');
  var endDate = ee.Date.fromYMD(year,1,1).advance(monthEnd,'month').advance(-1,'month').advance(-1,'day');
  var daymetT = daymet.filterDate(startDate,endDate)
                .select(band_names);
  daymetT = daymetT.reduce(reducer);
  daymetT = daymetT.set('system:time_start',startDate.millis());
  return daymetT
}

function iterateGetYearlyMonthlySum(years,months,monthSpan,reducer){
  var stack = years.map(function(yr){
    return months.map(function(month){
      var startMonth = month;var endMonth = ee.Number(month).add(monthSpan);
      
      return getMonthlySum(yr,startMonth,endMonth,reducer)
    })
  })
  stack = ee.ImageCollection(ee.List(stack).flatten()).sort('system:time_start');
  return stack
}

var precipSumStack =iterateGetYearlyMonthlySum(years,months,monthSpan,reducer)
Map.addLayer(precipSumStack,{'min':-20,'max':20},'Annual Average')
var tmin = precipSumStack.mean()
Map.addLayer(tmin,{'min':-20,'max':20},'Average Annual Average')
var resolution = 1000
Export.image.toDrive({image: tmin, description: 'DAYMET_Annual_Average_tmin',maxPixels: 2e9, crs: 'EPSG:4326',scale: resolution});